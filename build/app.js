"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){function e(e){return e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"default"in e?e.default:e}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=t(function(e,t){!function(e,r){"function"==typeof define&&define.amd?define(["exports"],r):r("object"===("undefined"==typeof t?"undefined":_typeof(t))&&"string"!=typeof t.nodeName?t:e.maquette={})}(r,function(e){var t,r,n="http://www.w3.org/",i=n+"2000/svg",o=n+"1999/xlink",s=[],a=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},p=function(e,t){return e.vnodeSelector!==t.vnodeSelector?!1:e.properties&&t.properties?e.properties.key!==t.properties.key?!1:e.properties.bind===t.properties.bind:!e.properties&&!t.properties},d=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},c=function e(t,r,n){for(var i=0,o=r.length;o>i;i++){var s=r[i];Array.isArray(s)?e(t,s,n):null!==s&&void 0!==s&&(s.hasOwnProperty("vnodeSelector")||(s=d(s)),n.push(s))}},l=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},u={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){e.style[t]=r},transitions:{enter:l,exit:l}},f=function(e){return a(u,e)},h=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},v=function(e,t,r){if(t)for(var n=r.eventHandlerInterceptor,s=Object.keys(t),a=s.length,p=0;a>p;p++){var d=s[p],c=t[d];if("className"===d)throw new Error('Property "className" is not supported, use "class".');if("class"===d)c.split(/\s+/).forEach(function(t){return e.classList.add(t)});else if("classes"===d)for(var l=Object.keys(c),u=l.length,f=0;u>f;f++){var v=l[f];c[v]&&e.classList.add(v)}else if("styles"===d)for(var m=Object.keys(c),y=m.length,f=0;y>f;f++){var b=m[f],k=c[b];k&&(h(k),r.styleApplyer(e,b,k))}else{if("key"===d)continue;if(null===c||void 0===c)continue;var g="undefined"==typeof c?"undefined":_typeof(c);"function"===g?0===d.lastIndexOf("on",0)&&(n&&(c=n(d,c,e,t)),"oninput"===d&&!function(){var e=c;c=function(t){t.target["oninput-value"]=t.target.value,e.apply(this,[t])}}(),e[d]=c):"string"===g&&"value"!==d&&"innerHTML"!==d?r.namespace===i&&"href"===d?e.setAttributeNS(o,d,c):e.setAttribute(d,c):e[d]=c}}},m=function(e,t,r,n){if(r){for(var s=!1,a=Object.keys(r),p=a.length,d=0;p>d;d++){var c=a[d],l=r[c],u=t[c];if("class"===c){if(u!==l)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===c)for(var f=e.classList,v=Object.keys(l),m=v.length,y=0;m>y;y++){var b=v[y],k=!!l[b],g=!!u[b];k!==g&&(s=!0,k?f.add(b):f.remove(b))}else if("styles"===c)for(var w=Object.keys(l),N=w.length,y=0;N>y;y++){var x=w[y],S=l[x],P=u[x];S!==P&&(s=!0,S?(h(S),n.styleApplyer(e,x,S)):n.styleApplyer(e,x,""))}else if(l||"string"!=typeof u||(l=""),"value"===c)e[c]!==l&&e["oninput-value"]!==l&&(e[c]=l,e["oninput-value"]=void 0),l!==u&&(s=!0);else if(l!==u){var A="undefined"==typeof l?"undefined":_typeof(l);if("function"===A)throw new Error("Functions may not be updated on subsequent renders (property: "+c+"). Hint: declare event handler functions outside the render() function.");"string"===A&&"innerHTML"!==c?n.namespace===i&&"href"===c?e.setAttributeNS(o,c,l):e.setAttribute(c,l):e[c]!==l&&(e[c]=l),s=!0}}return s}},y=function(e,t,r){if(""!==t.vnodeSelector)for(var n=r;n<e.length;n++)if(p(e[n],t))return n;return-1},b=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},k=function(e,t){var r=e.domNode;if(e.properties){var n=e.properties.exitAnimation;if(n){r.style.pointerEvents="none";var i=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof n?void n(r,i,e.properties):void t.exit(e.domNode,e.properties,n,i)}}r.parentNode&&r.parentNode.removeChild(r)},g=function(e,t,r,n){var i=e[t];if(""!==i.vnodeSelector){var o=i.properties,s=o?void 0===o.key?o.bind:o.key:void 0;if(!s)for(var a=0;a<e.length;a++)if(a!==t){var d=e[a];if(p(d,i))throw new Error("added"===n?r.vnodeSelector+" had a "+i.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.":r.vnodeSelector+" had a "+i.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},w=function(e,n,i,o,a){if(i===o)return!1;i=i||s,o=o||s;for(var d,c=i.length,l=o.length,u=a.transitions,f=0,h=0,v=!1;l>h;){var m=c>f?i[f]:void 0,w=o[h];if(void 0!==m&&p(m,w))v=r(m,w,a)||v,f++;else{var N=y(i,w,f+1);if(N>=0){for(d=f;N>d;d++)k(i[d],u),g(i,d,e,"removed");v=r(i[N],w,a)||v,f=N+1}else t(w,n,c>f?i[f].domNode:void 0,a),b(w,u),g(o,h,e,"added")}h++}if(c>f)for(d=f;c>d;d++)k(i[d],u),g(i,d,e,"removed");return v},N=function(e,r,n){if(r)for(var i=0;i<r.length;i++)t(r[i],e,void 0,n)},x=function(e,t,r){N(e,t.children,r),t.text&&(e.textContent=t.text),v(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])};t=function(e,t,r,n){var o,s,p,d,c,l=0,u=e.vnodeSelector;if(""===u)o=e.domNode=document.createTextNode(e.text),void 0!==r?t.insertBefore(o,r):t.appendChild(o);else{for(s=0;s<=u.length;++s)p=u.charAt(s),(s===u.length||"."===p||"#"===p)&&(d=u.charAt(l-1),c=u.slice(l,s),"."===d?o.classList.add(c):"#"===d?o.id=c:("svg"===c&&(n=a(n,{namespace:i})),o=e.domNode=void 0!==n.namespace?document.createElementNS(n.namespace,c):document.createElement(c),void 0!==r?t.insertBefore(o,r):t.appendChild(o)),l=s+1);x(o,e,n)}},r=function(e,t,r){var n=e.domNode,o=!1;if(e===t)return!1;var s=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var p=document.createTextNode(t.text);return n.parentNode.replaceChild(p,n),t.domNode=p,o=!0}}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=a(r,{namespace:i})),e.text!==t.text&&(s=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),s=w(t,n,e.children,t.children,r)||s,s=m(n,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[n,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),t.domNode=e.domNode,o};var S=function(e,t){return{update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");r(e,n,t),e=n},domNode:e.domNode}};e.h=function(e){var t=arguments[1];if("string"!=typeof e)throw new Error;var r=1;!t||t.hasOwnProperty("vnodeSelector")||Array.isArray(t)||"object"!==("undefined"==typeof t?"undefined":_typeof(t))?t=void 0:r=2;var n=void 0,i=void 0,o=arguments.length;if(o===r+1){var s=arguments[r];"string"==typeof s?n=s:void 0!==s&&null!==s&&1===s.length&&"string"==typeof s[0]&&(n=s[0])}if(void 0===n)for(i=[];o>r;r++){var a=arguments[r];null!==a&&void 0!==a&&(Array.isArray(a)?c(e,a,i):i.push(a.hasOwnProperty("vnodeSelector")?a:d(a)))}return{vnodeSelector:e,properties:t,children:i,text:""===n?void 0:n,domNode:null}},e.dom={create:function(e,r){return r=f(r),t(e,document.createElement("div"),void 0,r),S(e,r)},append:function(e,r,n){return n=f(n),t(r,e,void 0,n),S(r,n)},insertBefore:function(e,r,n){return n=f(n),t(r,e.parentNode,e,n),S(r,n)},merge:function(e,t,r){return r=f(r),t.domNode=e,x(e,t,r),S(t,r)}},e.createCache=function(){var e=void 0,t=void 0,r={invalidate:function(){t=void 0,e=void 0},result:function(r,n){if(e)for(var i=0;i<r.length;i++)e[i]!==r[i]&&(t=void 0);return t||(t=n(),e=r),t}};return r},e.createMapping=function(e,t,r){var n=[],i=[];return{results:i,map:function(o){for(var s=o.map(e),a=i.slice(),p=0,d=0;d<o.length;d++){var c=o[d],l=s[d];if(l===n[p])i[d]=a[p],r(c,a[p],d),p++;else{for(var u=!1,f=1;f<n.length+1;f++){var h=(p+f)%n.length;if(n[h]===l){i[d]=a[h],r(o[d],a[h],d),p=h+1,u=!0;break}}u||(i[d]=t(c,d))}}i.length=o.length,n=s}}},e.createProjector=function(r){var n,i=f(r);i.eventHandlerInterceptor=function(e,t,r,i){return function(){return n.scheduleRender(),t.apply(i.bind||this,arguments)}};var o,s=!0,a=!1,p=[],d=[],c=function(){if(o=void 0,s){s=!1;for(var e=0;e<p.length;e++){var t=d[e]();p[e].update(t)}s=!0}};return n={scheduleRender:function(){o||a||(o=requestAnimationFrame(c))},stop:function(){o&&(cancelAnimationFrame(o),o=void 0),a=!0},resume:function(){a=!1,s=!0,n.scheduleRender()},append:function(t,r){p.push(e.dom.append(t,r(),i)),d.push(r)},insertBefore:function(t,r){p.push(e.dom.insertBefore(t,r(),i)),d.push(r)},merge:function(t,r){p.push(e.dom.merge(t,r(),i)),d.push(r)},replace:function(e,r){var n=r();t(n,e.parentNode,e,i),e.parentNode.removeChild(e),p.push(S(n,i)),d.push(r)},detach:function(e){for(var t=0;t<d.length;t++)if(d[t]===e)return d.splice(t,1),p.splice(t,1)[0];throw new Error("renderMaquetteFunction was not found")}}}})}),i=e(n),o=i.h,s=[{name:"Keine",price:null,m2:null},{name:"XPS",price:1.69,m2:5.59},{name:"Schaum 2mm",price:4.49,m2:8},{name:"Schaum 3mm",price:6.49,m2:5.5}],a=function(e){return e.toFixed(2).replace(".",",")},p=function(){function e(){_classCallCheck(this,e),this.projector=i.createProjector(),this.reset()}return e.prototype.reset=function(){this.needed=null,this.perpack=null,this.pricem2=null,this.packs=0,this.minPacks=0,this.insulation=0},e.prototype.calcMinPacks=function(){this.minPacks=this.needed&&this.perpack?Math.ceil(parseFloat(this.needed)/parseFloat(this.perpack)):0,this.packs=this.minPacks},e.prototype.chNeeded=function(e){this.needed=e.target.value,this.calcMinPacks()},e.prototype.chPerpack=function(e){this.perpack=e.target.value,this.calcMinPacks()},e.prototype.chPricem2=function(e){this.pricem2=e.target.value},e.prototype.addPack=function(){this.needed&&this.perpack&&(this.packs+=1)},e.prototype.removePack=function(){this.needed&&this.perpack&&this.packs>this.minPacks&&(this.packs-=1)},e.prototype.vzugabe=function(){if(!this.needed||!this.perpack||!this.packs)return null;var e=parseFloat(this.needed),t=parseFloat(this.perpack),r=parseFloat(this.packs),n=t*r-e;return{m2:n,pct:Math.round(n/e*100)}},e.prototype.preis=function(){if(!this.perpack||!this.packs||!this.pricem2)return null;var e=parseFloat(this.perpack),t=parseFloat(this.packs),r=parseFloat(this.pricem2),n=e*t*r;if(this.insulation>0){var i=s[this.insulation];n+=Math.ceil(t*e/i.m2)*i.price}return n.toFixed(2).replace(".",",")},e.prototype.leisten=function(){return this.needed&&this.packs?Math.round(.8*parseFloat(this.needed)/2.4):null},e.prototype.selectInsulation=function(e){this.insulation=e.currentTarget.insulation},e.prototype.render=function(){var e=this,t=this.vzugabe(),r=this.packs?parseFloat(this.packs)*parseFloat(this.perpack):null,n=r?r*parseFloat(this.pricem2):null;return o("div.app",[o("div.topbar",[o("h1","Paketkalkulator")]),o("div.spacer"),o("div.card",[o("div.input",[o("label","Bedarf"),o("input",{type:"number",value:this.needed,oninput:this.chNeeded,bind:this}),o("label.inset","qm")]),o("div.input",[o("label","qm/Paket"),o("input",{type:"number",value:this.perpack,oninput:this.chPerpack,bind:this}),o("label.inset","qm")]),o("div.input",[o("label","Preis/qm"),o("input",{type:"number",value:this.pricem2,oninput:this.chPricem2,bind:this}),o("label.inset","€")])]),o("div.card",[o("div.tapper",[o("div",o("button.chpack",{classes:{disabled:this.packs<=this.minPacks||0==this.packs},onclick:this.removePack,bind:this},"–")),o("div",[o("div.packs",this.packs),o("label","Pakete")]),o("div",o("button.chpack",{classes:{disabled:!this.needed||!this.perpack},onclick:this.addPack,bind:this},"+"))]),o("div.stats",[o("div.qm",r?a(r)+"qm":"qm total"),o("div.preis",n?a(n)+"€":"Preis"),o("div.vzugabe",o("div.cbox",{classes:{green:t&&t.pct>5,yellow:t&&t.pct>3&&t.pct<=5,red:t&&t.pct<=3}},t?t.m2.toFixed(2).replace(".",",")+" ("+t.pct+"%)":"V-Zugabe"))])]),o("div.card",o("table",[o("thead",o("tr",[o("th","Dämmung"),o("th","Rolle"),o("th","Anz."),o("th.right","Preis")])),o("tbody",s.map(function(t,n){var i=r&&t.price?Math.ceil(r/t.m2):null;return o("tr",{insulation:n,key:t,onclick:e.selectInsulation,bind:e,classes:{selected:e.insulation==n}},[o("th",t.name),o("td",t.price?[a(t.m2),o("span.qm","qm"),o("br"),a(t.price),o("span.eur","€")]:[o("br"),o("br")]),o("td",i?[i,o("span.rolls"," Rollen"),o("br"),a(i*t.m2),o("span.qm","qm")]:""),o("td.right",i?(i*t.m2*t.price).toFixed(2).replace(".",","):"")])}))])),o("div.spacer"),o("div.results",[o("div.preis",[o("div.result",this.preis()||"..."),o("label","Total (€)")]),o("div.leisten",[o("div.result",this.leisten()||"..."),o("label","Leisten")]),o("div.reset",o("button.reset",{onclick:this.reset,bind:this},"C"))])])},e}();document.addEventListener("DOMContentLoaded",function(){var e=new p;e.projector.append(document.body,e.render.bind(e))})}();